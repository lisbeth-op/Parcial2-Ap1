@page "/c_productos"

@inject ProductosBLL productosBLL;


<EditForm Model="lista">
    <DataAnnotationsValidator />



    <div class="card text-primary">
        <div class="card-header text-center">
            <h3>Consulta de nuevos produtos empaquetados</h3>
        </div>
        <div class="card-body">

            <div class="row">
                <div class="col-3">
                    <label class="form-label">Criterio</label>
                    <input type="text" class="form-control" @bind="ctr">
                </div>
                <div class="col-2">
                    <label class="form-label">Filtro</label <select class="form-control" @bind="Filtro">
                    <option value="1">Descripcion</option>
                    <option value="2">Costo</option>
                    <option value="3">Precio</option>
                    <option value="4">Producto ID</option>

                    </select>
                </div>

                <div class="col-3 d-flex align-items-end">
                    <button type="button" class="btn btn-primary" @onclick="Buscar">
                        <span class="oi oi-magnifying-glass"></span>
                    </button>
                </div>
            </div>



            <table class="table">
                <thead>
                    <tr>
                        <th>Descripcion </th>
                        <th>Costo</th>
                        <th>Precio</th>
                        <th>Producto ID</th>

                        <th></th>

                    </tr>
                </thead>
                <tbody>
                    @foreach (var empaquetado in lista)
                    {
                        <tr>
                            <td>@empaquetado.Descripcion</td>

                            <td>@empaquetado.Costo</td>
                            <td>@empaquetado.Precio</td>
                            <td>@empaquetado.ProductoId</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

</EditForm>

@code
{
    protected override void OnInitialized() => lista = productosBLL.GetList(o => true);

    public string Filtro { get; set; } = "";
    public string ctr { get; set; } = "";

    public List<Productos> lista { get; set; } = new List<Productos>();
    public int EmpacadosId { get; set; }
    public void Buscar()
    {
        switch (Filtro)
        {

            case "1":
                lista = productosBLL.GetList(e => e.Descripcion.ToString().Contains(ctr));
                break;

            case "2":
                lista = productosBLL.GetList(f => f.Costo.ToString().Contains(ctr));
                break;

            case "3":
                lista = productosBLL.GetList(c => c.Precio.ToString().Contains(ctr));
                break;
            case "4":
                lista = productosBLL.GetList(c => c.ProductoId.ToString().Contains(ctr));
                break;

          
        }


    }
 
}
